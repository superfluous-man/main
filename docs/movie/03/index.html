<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>第 03 章 運鏡與三角形原理 | 桃林筆記</title>


<link rel="stylesheet" href="/book.min.6e3c57d7b9f4cbea9529cc3057fa6514901ff485332bb086b59d9e98b86d978d.css" integrity="sha256-bjxX17n0y&#43;qVKcwwV/plFJAf9IUzK7CGtZ2emLhtl40=">


<script defer src="/search.min.240f4b70e01bb12c59816ec12613e7113568f6048a2094473d70e97fb18cedb4.js" integrity="sha256-JA9LcOAbsSxZgW7BJhPnETVo9gSKIJRHPXDpf7GM7bQ="></script>



<link rel="icon" href="/favicon.png" type="image/x-icon">


<link rel="alternate" type="application/rss+xml" href="https://mengxianjun.org/docs/movie/03/index.xml" title="桃林筆記" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  <span id="top"></span>

</head>
<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav>
<p style="font-family:SYHei Heavy;text-align:center" class="book-brand">
  <a href="https://mengxianjun.org/"><img src="https://i.loli.net/2019/10/13/NemCId6lUzVWR92.png" alt="" style="width:217px;height:79px;"/></a>
</p>


<div class="book-search">
  <input type="text" placeholder="Search" id="book-search-input" maxlength="64" readonly />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>





    
  
  
  

  <style>
  nav ul a[href$="\2f docs\2fmovie\2f 03\2f "] {
      color: #004ed0;
  }
  </style>

<ul>
<li><a href="/posts/"><span class="wenxuan"></span>&nbsp;<font face="SYHei Bold">文選</font></a></li>
<li><a href="/docs/movie/"><span class="tushu"></span>&nbsp;<font face="SYHei Bold">攝影與剪輯</font></a></li>
<li><a href="/docs/jcxzx/"><span class="tushu"></span>&nbsp;<font face="SYHei Bold">基礎寫作學</font></a></li>
<li><a href="/docs/wxs/"><span class="tushu"></span>&nbsp;<font face="SYHei Bold">中國文學史</font></a></li>
<li><a href="/docs/zxs/"><span class="tushu"></span>&nbsp;<font face="SYHei Bold">中國哲學史</font></a></li>
<li><a href="/docs/alinks/"><span class="lianjie"></span>&nbsp;<font face="SYHei Bold">鏈接</font></a></li>
</ul>







</nav>


<script>
(function() {
  var menu = document.querySelector("aside.book-menu nav");
  addEventListener("beforeunload", function(event) {
    localStorage.setItem("menu.scrollTop", menu.scrollTop);
  });
  menu.scrollTop = localStorage.getItem("menu.scrollTop");
})();
</script>

    </aside>

    <div class="book-page">
      <header class="flex align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" alt="Menu" />
  </label>
  <strong>第 03 章 運鏡與三角形原理</strong>
</header>

      
<header class="markdown">
    <h5>
      第 03 章 運鏡與三角形原理
    </h5>
<p style="font-family:SYHei Medium;text-align:center"><span class="zuozhe"></span>李二狗 <a href="https://duoyu.ren/"><span class="zuozheat"></span>克萊登大學保衛科屌絲</a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="riqi"></span>&nbsp;Monday, October 7, 2019 08:33&nbsp;&nbsp;&nbsp;&nbsp;<span class="zishu"></span>&nbsp;2375&nbsp;&nbsp;&nbsp;&nbsp;<span class="yuedushichang"></span>&nbsp;5 min&nbsp;&nbsp;&nbsp;&nbsp;<span class="yueduliang"></span>&nbsp;<span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span></p>
</header>
<article class="markdown">

<div style="font-family:SYHei Bold;text-align:center">



  

<a  href="/docs/movie/02/"   class="book-btn">
  &#9664;上章
</a>
&nbsp;&nbsp;&nbsp; 



  

<a  href="/docs/movie/"   class="book-btn">
  &#9673;總目
</a>
&nbsp;&nbsp;&nbsp; 



  

<a  href="/docs/movie/04/"   class="book-btn">
  下章&#9654;
</a>
</div>

<p>半個世紀以來，「橫排」逐漸成爲出版物排版的主流。十年前，境內還能偶爾看到一些出版社以「直排」方式出版一些古籍圖書。目下，僅有境外幾家出版社偶爾還以「直排」方式出版一些文史讀物。前幾日瀏覽素材，看到過去十年間網絡上零零散散的基於 LaTeX 的中文直排方案，逐一分析下來，發覺大都需要完善需求、更新源碼。自己久不讀書，讀「直排」書的機會就更少了。近來因飲酒吹風而感冒閉門，趁着這般光景，嘗試整理出一份基於 XeLaTeX 與 XeCJK 的中文直書方案。</p>

<h1 id="直排與現代排版需求">直排與現代排版需求</h1>

<p>爲了更好吸納西學現代科學，方便排版公式、符號、插圖等頁面元素，變「直書」爲「橫書」實乃大勢所趨。一百年來，經過時間與實踐檢驗，這個問題早已有了的明確答案。</p>

<h1 id="xecjk-直書設置">XeCJK 直書設置</h1>

<p>在 XeCJK 中直書需要旋轉 PDF，並且原橫排環境中的樣式皆需調整以適應直排版式。以下爲需要調整的若干樣式。</p>

<h2 id="總設置">總設置</h2>

<pre><code class="language-Latex">%文檔類型加入landscape選項
\documentclass[a4paper,12pt,openany,landscape]{book}
%導入XeCJK Package
\usepackage[CJKchecksingle,AutoFallBack=true]{xeCJK}
%設定直排字體
\setCJKmainfont[Script=CJK,Vertical=RotatedGlyphs,RawFeature={vertical:+vert},BoldFont=H-SiuNiu-Bold,ItalicFont=HGBLight-H]{I.MingCP}
\defaultCJKfontfeatures{RawFeature={vertical:+vert}}
</code></pre>

<h2 id="調正漢字基線">調正漢字基線</h2>

<pre><code class="language-Latex">%漢字基線調整適應中英文混排
\let\CJKsymbolOrig\CJKsymbol
\let\CJKpunctsymbolOrig\CJKpunctsymbol
\newcommand*\CJKmovesymbol[1]{\raise.35em\hbox{\CJKsymbolOrig{#1}}}
\newcommand*\CJKmovepunctsymbol[1]{\raise.35em\hbox{\CJKpunctsymbolOrig{#1}}}
\newcommand*\CJKmove{\punctstyle{plain}
	\let\CJKsymbol\CJKmovesymbol
	\let\CJKpunctsymbol\CJKmovepunctsymbol}	
%在\begin{document}後添加\CJKmove
\begin{document}
\CJKmove
</code></pre>

<h2 id="目錄中的章節樣式">目錄中的章節樣式</h2>

<pre><code class="language-Latex">\titlecontents{chapter}[0em]{\addvspace{5pt}\fontsizec{0.7cm}\it}     % for  Chinese table of contents
{\rotatebox[origin=cc]{-270}{\ncircbs{\thecontentslabel}}~}
{\rotatebox[origin=cc]{-270}{\Alphcircwcu{21}}~\thecontentslabel\helfont}{\fontsizec{0.7cm}\color{black}\;\titlerule*[.5pc]{.}\;\zhnumsetup{style={Traditional,Financial}}\zhdigits{\thecontentspage}}

\titlecontents{section}[0cm]{\it}
{第{\thecontentslabel}節~~~}
{\rotatebox[origin=cc]{-270}{\Alphcircwcu{21}}~\thecontentslabel\helfont}{\titlerule*[.5pc]{.}\;\color{black}\zhnumsetup{style={Traditional,Financial}}\zhdigits{\thecontentspage}}
</code></pre>

<p><a href="https://i.loli.net/2018/12/20/5c1b692106fe9.png"><img src="https://i.loli.net/2018/12/20/5c1b692106fe9.png" alt="目錄版式效果" /></a></p>

<h2 id="正文中的章節樣式">正文中的章節樣式</h2>

<pre><code class="language-Latex">%%竖排章样式
\assignpagestyle{\chapter}{empty}%去掉章页面页码
\assignpagestyle{\chapter*}{empty}%去掉章页面页码
\newcommand{\mychapter}[1]{%
	\color{myred}\HGBM\fontsize{37}{37}第~\rotatebox[x=0.715cm,origin=c]{-270}{\ncircbs{\thechapter}}~章{{\ZSKS·}#1}
}
\newcommand{\mychapterun}[1]{%
	\color{myred}\fontsize{37}{37}\ding{109}~\akzfont\HGBM #1
}
\titleformat{\chapter}{}{}{0em}{\mychapter}% code preceding the title body  (title body is taken as argument)
\titleformat{name=\chapter,numberless}{}{}{0pt}{\mychapterun}
\titlespacing{\chapter}
{0pt}{0pt}{36pt}
%%竖排節样式
\newcommand{\mysection}[1]{%
			\color{myred}\MLan \fontsize{21}{21}第~{\thesection}~節~~~~ #1
}
\newcommand{\mysectionun}[1]{%
			\color{myred}\fontsize{21}{21}\ding{109}~\akzfont\MLan #1
}
\titleformat{\section}{}{}{0mm}{\mysection}
\titleformat{name=\section,numberless}{}{}{0pt}{\mysectionun}
\titlespacing{\section}
{0pt}{12pt}{6pt}
</code></pre>

<p><img src="https://i.loli.net/2018/12/20/5c1b678d460d3.png" alt="正文章節標題樣式" /></p>

<h2 id="插圖樣式設定">插圖樣式設定</h2>

<p>直排時，插圖不易調整，尤其是插圖的標題樣式。本文方案暫且處理如下。</p>

<pre><code class="language-Latex">\usepackage{wrapfig}
\usepackage{caption}
\captionsetup[wrapfigure]{font=small,labelfont=bf,textfont=it,aboveskip=6pt,belowskip=-1.02em,justification=raggedright,name={Fig.}}%,labelsep=period
\newcommand{\mafig}[2]{
	\begin{wrapfigure}{O}[0pt]{0.2\textwidth}%[10]
		\vspace{-6pt}
	{\tcbincludegraphics[size=fbox,colframe=myred!50!black,colback=red!60!black,center title,drop fuzzy shadow,colback=myred,boxsep=3pt,arc=0pt,graphics options={scale=.5,angle=-270},title={\large\HGBR\helfont #2}]{#1}}
		\vspace{-6pt}
\end{wrapfigure}
}
</code></pre>

<h2 id="參考文獻設定">參考文獻設定</h2>

<pre><code class="language-Latex">%採用gb7714-2015格式
\usepackage[backend = biber,bibstyle = gb7714-2015,citestyle=gb7714-2015ay,natbib=true,mcite=true,sorting=nyt,sortcites=true,autopunct=true,hyperref=true,abbreviate=false,backref=true]{biblatex}%國標2015文獻引用格式 %bibstyle = gb7714-2015,citestyle=gb7714-2015ay,bibstyle=alphabetic,%=gb7714-2015ay为（作者年份页码）样式引用
\addbibresource{bibliography.bib} % BibTeX bibliography file bibliography.bib
\defbibheading{bibempty}{}
\DefineBibliographyStrings{english}{%
	backrefpage = {引用頁：},
	backrefpages= {引用頁：},
}

%正文行文示例
……\cite[P178]{adornoRethinkingArchitectureReader1997}。
\textcite[P352]{haidegeerHeErDeLinShiDeChanShi2000}認爲……

%正文列印參考文獻
\printbibliography[heading=bibempty]
</code></pre>

<p><img src="https://i.loli.net/2018/12/20/5c1b688b4f3c5.png" alt="參考文獻直排樣式" /></p>

<h2 id="夾註樣式設置">夾註樣式設置</h2>

<pre><code class="language-Latex">%%%gezhu environment
\usepackage{zhulem}
\usepackage{gezhu}
\setgezhuraise{-3.5pt}
\setgezhulines{2}
\everygezhu{\linespread{1.2}\fontsize{9}{9}\HMOP\selectfont}
\newcommand{\gz}[1]{{\gezhu{#1}}}
%\newcommand{\gz}[1]{\disablepinyin\gezhu{\HMOP #1}\enablepinyin}
</code></pre>

<p><a href="https://i.loli.net/2018/12/20/5c1b6a9f161e3.png"><img src="https://i.loli.net/2018/12/20/5c1b6a9f161e3.png" alt="行間夾批樣式效果" /></a></p>

<h2 id="頁眉頁腳樣式">頁眉頁腳樣式</h2>

<pre><code class="language-Latex">\usepackage{titleps} %詳細參見說明文檔

\newpagestyle{mapage}{%   %numbered chapter
	\sethead[\MLan\color{myred}\bottitlemarks{第{\thesection}節}~~~\sectiontitle]
	 []
	 [{\MLan\color{myred}\rotatebox[x=0.225cm,origin=c]{-270}{\ncircbs{\thechapter}}~\chaptertitle《~\parttitle 編《~\thebooktitle《~第{\HGBM\color{black}\zhnumsetup{style={Traditional,Financial}}\zhdigits{\thepage}}頁}] %even head
	 {}
	 {}
	 {} %odd head
	 \setfoot[]
	 []
	 [] %even foot
	 {\MLan\color{myred}\bottitlemarks{第{\thesection}節}~~~\sectiontitle}
	 {}
	 {{\MLan\color{myred}\rotatebox[x=0.225cm,origin=c]{-270}{\ncircbs{\thechapter}}~\chaptertitle《~\parttitle 編《~\thebooktitle《~第{\HGBM\color{black}\zhnumsetup{style={Traditional,Financial}}\zhdigits{\thepage}}頁}} %odd foot
				}
	\settitlemarks{part,chapter,section,subsection,subsubsection}

</code></pre>

<p><a href="https://i.loli.net/2018/12/20/5c1b6b2b43a2f.png"><img src="https://i.loli.net/2018/12/20/5c1b6b2b43a2f.png" alt="頁眉頁腳直排樣式" /></a></p>

<h2 id="章節尾註樣式">章節尾註樣式</h2>

<pre><code class="language-Latex">\usepackage[page]{pagenote}%[page] Because of how TeX writes information to files, when the page option is used there must be no notes on the page where \printnotes or \printnotes* closes the ent file. If necessary, a \clearpage or similar must be used before the \print （標記注釋所在頁碼必須讓printnotes另起一頁，否則可能吃掉與\printnotes同頁的注釋^_^）

% 正文中的注释编号样式调整：圓圈數字
\renewcommand\notenumintext[1]{\rotatebox[origin=cc]{-270}{\textsuperscript{\footnotesize\ncircrds{#1}}}}
% 章节末尾的注释编号样式调整：方形黑底數字
\renewcommand\notenuminnotes[1]{\rotatebox[origin=cc]{-270}{\ncircbs{#1}}}
%尾註標記該註釋在正文出現的頁碼
\renewcommand{\pagename}{{P.}}

\makepagenote	
</code></pre>

<p><a href="https://i.loli.net/2018/12/20/5c1b6b9601691.png"><img src="https://i.loli.net/2018/12/20/5c1b6b9601691.png" alt="註釋採用章末尾註" /></a></p>

<h2 id="索引样式設定">索引样式設定</h2>

<p>直排模式的索引與橫排並無多少區別，參考本站 <em><a href="https://mengxianjun.org/2016/10/15/zhmakeindex/">Zhmakeindex and the Indices Creating of Chinese Books</a></em> 一文即可。效果見下圖：</p>

<p><img src="https://i.loli.net/2018/12/20/5c1b5ed90a733.png" alt="直排索引樣式" /></p>

<h1 id="復原古籍印版樣式">復原古籍印版樣式</h1>

<div class="mnotices minfo"><p>這類字體近年來越來越多，許多沈睡在古籍中的字形得以重見天日。尤以<z>日本</z>[<zl>欣喜堂</zl>](http://www.kinkido.net/)的工作最爲出色。</p></div>

<p>使用一些電子化的古籍印刷字體，如<a href="https://wytype.com/typeface/earlier">康熙字典體</a>（《康熙字典》印刷所用字型）、<a href="https://wytype.com/typeface/WyueGutiFangsong">聚珍仿宋</a>（北宋刊本中的字型）、<a href="https://www.justfont.com/fontdetail/145">浙江民間書刻體</a>之類，可以復原古籍原典部分印刷效果。下面兩副圖即大致以<a href="https://wytype.com/typeface/WyueGutiFangsong">聚珍仿宋</a>排版的圖書與電子化重排效果示意。</p>

<p><img src="https://i.loli.net/2018/12/20/5c1b4a0148e76.png" alt="世界書局《駢體文鈔》版式" />
<img src="https://i.loli.net/2018/12/20/5c1b4a148fdcb.png" alt="仿世界書局版" /></p>

<h1 id="結語">結語</h1>

<p>上文簡單展示了以 XeCJK 與 XeLaTeX 製作中文直排版式的方案。此外，尚有基於 <a href="https://texwiki.texjp.org/?upTeX%2CupLaTeX">upLaTeX</a> 以及較新的 <a href="https://github.com/clerkma/ptex-ng">Asiatic pTeX</a> 的直排方案，可資參考。</p>

<div style="font-family:SYHei Bold;text-align:center">



  

<a  href="/docs/movie/02/"   class="book-btn">
  &#9664;上章
</a>
&nbsp;&nbsp;&nbsp; 



  

<a  href="/docs/movie/"   class="book-btn">
  &#9673;總目
</a>
&nbsp;&nbsp;&nbsp; 



  

<a  href="/docs/movie/04/"   class="book-btn">
  下章&#9654;
</a>
</div>
<p style="font-family:SYHei Bold;text-align:right"><span class="gengxin"></span>The article was recently updated on Tuesday, October 8, 2019, 00:17:43 by .</p>
</article>

     
      <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> 

    </div>

    
  

<aside class="book-toc level-true fixed">
<nav id="TableOfContents">
<ul>
<li><a href="#直排與現代排版需求">直排與現代排版需求</a></li>
<li><a href="#xecjk-直書設置">XeCJK 直書設置</a>
<ul>
<li><a href="#總設置">總設置</a></li>
<li><a href="#調正漢字基線">調正漢字基線</a></li>
<li><a href="#目錄中的章節樣式">目錄中的章節樣式</a></li>
<li><a href="#正文中的章節樣式">正文中的章節樣式</a></li>
<li><a href="#插圖樣式設定">插圖樣式設定</a></li>
<li><a href="#參考文獻設定">參考文獻設定</a></li>
<li><a href="#夾註樣式設置">夾註樣式設置</a></li>
<li><a href="#頁眉頁腳樣式">頁眉頁腳樣式</a></li>
<li><a href="#章節尾註樣式">章節尾註樣式</a></li>
<li><a href="#索引样式設定">索引样式設定</a></li>
</ul></li>
<li><a href="#復原古籍印版樣式">復原古籍印版樣式</a></li>
<li><a href="#結語">結語</a></li>
</ul>
</nav>
</aside>




  </main>

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-83708465-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


<div class="post-comment">
      
             
      
      
      
<div class="post bg-white">
    <script src="https://utteranc.es/client.js"
          repo="superfluous-man/superfluous-man.github.io"
          issue-term="pathname"
          theme="github-light"
          crossorigin="anonymous"
          async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>
</div>

</div>
<a href="#top" class="backtop"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-circle-up" class="svg-inline--fa fa-chevron-circle-up fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
    <path fill="currentColor" d="M8 256C8 119 119 8 256 8s248 111 248 248-111 248-248 248S8 393 8 256zm231-113.9L103.5 277.6c-9.4 9.4-9.4 24.6 0 33.9l17 17c9.4 9.4 24.6 9.4 33.9 0L256 226.9l101.6 101.6c9.4 9.4 24.6 9.4 33.9 0l17-17c9.4-9.4 9.4-24.6 0-33.9L273 142.1c-9.4-9.4-24.6-9.4-34 0z">
    </path>
</svg>

</a>
</body>
</html>
